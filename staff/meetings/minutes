#!/usr/bin/env python3
"""Script for recording meeting minutes.

This script opens up an editor for taking minutes in the appropriate file.
It also performs setup and teardown operations, particularly in the case of BoD minutes.
"""
import os
import subprocess
import sys

from ocflib.misc.shell import get_editor

import meetings


def main():
    options = meetings.get_minutes_choices()

    print('What are you taking notes for?')
    print('Options:', ', '.join(options))
    choice = input('Enter choice: ')
    if choice not in options:
        print('Invalid choice.')
        return 1

    filename = meetings.get_minutes_file()
    filepath = os.path.join(meetings.get_minutes_path(choice), filename)
    meetings.minutes_setup(filepath, choice)
    subprocess.call([get_editor(), filepath])
    meetings.minutes_done(filepath, choice)


if __name__ == '__main__':
    sys.exit(main())
